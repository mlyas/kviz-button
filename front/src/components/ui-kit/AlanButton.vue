<template>
  <div class="alan-button" :style="style" @touchstart="!pressed && $emit('press')" @touchend="$emit('unPress')">
    <svg width="1714" height="1811" viewBox="0 0 1714 1811" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g filter="url(#filter0_d_9_28)">
        <path d="M817.212 0.887151C657.745 8.62048 510.145 57.5538 377.879 146.754C175.612 283.154 39.7451 504.487 10.0118 745.954C5.07848 785.554 4.01181 805.421 4.01181 853.287C3.87848 900.887 4.81181 917.287 10.0118 959.954C21.2118 1053.95 48.9451 1145.55 92.6785 1233.29C136.278 1320.49 187.212 1390.89 256.678 1459.55C309.078 1511.42 356.412 1548.22 419.079 1585.82C513.612 1642.62 623.745 1681.95 731.212 1697.15C823.478 1710.22 911.212 1709.15 1002.55 1693.82C1120.01 1674.09 1240.41 1625.15 1339.21 1556.75C1458.41 1474.35 1555.88 1362.49 1619.75 1234.75C1704.28 1065.95 1730.01 872.487 1693.08 685.287C1678.55 611.687 1654.55 541.687 1619.75 471.954C1560.68 353.421 1474.15 249.954 1366.55 169.154C1272.55 98.4872 1153.35 43.9538 1038.81 19.4205C968.545 4.22048 887.212 -2.57952 817.212 0.887151ZM807.212 101.154C807.212 111.154 803.078 146.22 799.078 169.82C786.278 246.487 765.345 312.221 731.878 380.621C657.878 531.821 535.079 654.621 383.879 728.621C311.478 763.954 246.545 784.087 157.878 798.487C147.345 800.221 110.012 803.954 103.612 803.954H98.9451L99.8785 793.554C108.412 693.021 132.945 604.487 176.545 516.621C213.745 441.954 259.745 377.287 318.012 318.621C438.945 196.62 601.745 117.687 769.878 99.4205C810.545 95.0205 807.212 94.8872 807.212 101.154ZM943.878 99.4205C1063.48 112.754 1181.21 156.487 1281.88 225.02C1324.01 253.687 1352.95 277.687 1391.35 315.954C1429.88 354.487 1453.21 382.221 1482.15 423.954C1491.75 437.821 1509.88 466.221 1509.88 467.421C1509.88 467.821 1510.95 469.821 1512.41 471.687C1517.08 478.354 1538.15 518.754 1546.01 536.221C1563.48 574.487 1579.21 618.354 1589.61 657.954C1602.15 705.154 1608.28 741.154 1613.08 796.221L1613.75 803.954H1609.35C1600.55 803.954 1563.48 799.821 1543.35 796.487C1469.08 784.621 1399.61 762.754 1331.88 730.087C1274.81 702.487 1220.68 667.154 1169.88 624.354C1149.35 607.021 1101.75 559.287 1084.28 538.621C997.879 436.087 941.078 317.021 916.678 187.287C912.278 163.42 908.812 139.154 907.212 120.62C906.412 111.02 905.612 101.554 905.345 99.5538L904.945 95.6872L915.745 96.6205C921.745 97.0205 934.412 98.3538 943.878 99.4205ZM863.612 347.287C900.945 448.754 964.679 550.887 1041.61 632.354C1067.21 659.554 1104.41 693.954 1125.08 709.954C1128.01 712.087 1132.15 715.554 1134.41 717.421C1150.95 731.154 1196.55 762.887 1219.88 776.887C1261.61 801.821 1305.88 823.687 1348.55 840.621C1362.15 846.087 1374.95 850.887 1377.08 851.421C1379.08 851.821 1380.28 852.754 1379.61 853.287C1379.08 853.954 1371.61 856.887 1363.21 859.954C1324.41 874.221 1277.75 896.087 1238.95 918.354C1225.88 925.821 1214.81 931.954 1214.28 931.954C1213.61 931.954 1182.28 901.154 1144.55 863.421L1075.88 794.754L1047.75 810.487L1019.48 826.221L939.745 746.487C895.745 702.487 859.478 666.754 858.945 666.887C858.412 667.154 845.878 679.287 830.945 693.821C793.878 730.221 748.545 774.754 711.878 810.621C694.945 827.154 652.145 869.154 616.678 903.954C581.212 938.754 551.878 967.287 551.345 967.287C550.945 967.287 538.279 959.021 523.212 949.021C468.545 912.621 410.945 882.887 353.079 861.287C342.945 857.421 334.012 853.954 333.345 853.687C332.812 853.287 342.012 849.154 354.012 844.621C444.412 810.221 529.478 759.687 604.545 695.954C630.012 674.487 680.945 623.154 702.012 597.954C765.745 521.687 815.078 438.087 848.012 350.354C852.278 338.887 856.278 329.821 856.812 330.354C857.345 330.887 860.412 338.487 863.612 347.287ZM931.878 871.954L1003.75 943.821L1007.88 941.421C1011.61 939.021 1051.21 916.887 1057.35 913.554C1059.75 912.221 1063.61 915.687 1097.75 949.821L1135.48 987.687L1116.41 1003.55C1023.21 1081.02 947.745 1177.55 894.545 1287.29C881.878 1313.29 865.212 1352.49 859.878 1369.02C858.678 1372.75 857.212 1375.95 856.545 1375.95C855.878 1375.95 854.678 1373.69 853.745 1370.89C849.212 1357.15 832.812 1317.69 822.145 1295.02C778.678 1202.49 716.412 1115.95 642.145 1044.35L625.212 1028.09L675.212 979.021C702.678 952.087 754.945 900.754 791.212 865.021C827.478 829.287 857.878 800.087 858.545 799.954C859.345 799.954 892.278 832.354 931.878 871.954ZM116.545 903.287C122.812 903.687 135.078 905.021 143.878 906.087C291.612 924.754 426.545 984.087 541.879 1081.15C563.212 1099.02 610.678 1146.49 628.812 1167.95C714.678 1269.95 771.345 1388.75 796.012 1518.49C801.078 1545.69 805.212 1576.09 806.678 1597.02L807.612 1610.62L801.745 1609.95C798.545 1609.69 788.678 1608.75 779.878 1607.95C734.278 1603.82 683.745 1593.69 634.545 1578.89C529.478 1547.15 427.879 1489.29 346.545 1415.02C205.745 1286.35 120.012 1115.69 101.212 926.754C98.5451 900.087 98.5451 901.154 102.278 901.821C103.878 902.221 110.278 902.887 116.545 903.287ZM1613.35 907.554C1612.95 911.154 1612.01 921.154 1611.21 929.954C1601.08 1039.95 1562.01 1155.15 1501.88 1252.22C1397.35 1420.49 1232.41 1541.15 1040.95 1589.15C1004.15 1598.49 967.612 1604.75 933.212 1607.95C924.412 1608.75 914.412 1609.69 911.078 1609.95L904.945 1610.62L905.478 1603.69C916.278 1467.15 960.412 1341.55 1036.28 1230.62C1063.48 1190.89 1088.15 1161.42 1126.41 1123.15C1174.68 1075.02 1217.48 1041.29 1271.75 1008.62C1373.75 947.421 1480.28 913.554 1606.55 902.221C1609.48 901.954 1612.41 901.687 1612.95 901.554C1613.48 901.421 1613.61 904.087 1613.35 907.554Z" fill="white"/>
      </g>
      <defs>
        <filter id="filter0_d_9_28" x="0" y="0" width="1713.5" height="1810.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dx="10" :dy="yOffset"/>
          <feGaussianBlur stdDeviation="2"/>
          <feComposite in2="hardAlpha" operator="out"/>
          <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_9_28"/>
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_9_28" result="shape"/>
        </filter>
      </defs>
    </svg>
  </div>
</template>

<script>
import gsap from 'gsap'

export default {
  name: "AlanButton",
  props: {
    size: Number,
    pressed: {
      type: Boolean,
      default: true,
    }
  },
  data() {
    return {
      yOffset: 100,
      gsap: null,
    }
  },
  mounted() {
    if (this.pressed) this.press(true);
  },
  computed: {
    style() {
      const style = {}
      if (this.size !== undefined) {
        style.width = this.size + 'px';
        style.height = this.size + 'px';
      }
      style.transform = `scale(${this.yOffset / 1000 + .9})`
      return style
    }
  },
  methods: {
    press(instant) {
      if (this.gsap) this.gsap.kill()
      this.gsap = gsap.to(this, { yOffset: 30, duration: instant ? .01 : .15 })
    },
    unPress() {
      if (this.gsap) this.gsap.kill()
      this.gsap = gsap.to(this, { yOffset: 100, duration: .15 })
    }
  },
  watch: {
    pressed(val) {
      if (val) this.press()
      else this.unPress()
    }
  }
}
</script>

<style lang="scss" scoped>
.alan-button {
  width: 100%;
  box-sizing: border-box;
  border-radius: 50%;
  svg {
    display: block;
    width: 100%;
    height: 100%;
    margin-bottom: -6%;
  }
}
</style>
